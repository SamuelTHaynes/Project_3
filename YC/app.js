
let state = ["Alabama", "Arizona", "Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];
let TRND_building = [169663630.3,3784162.292,81588209.72,35308340.48,108820055,16157945.59,4724928.261,171833462.1,184845067.7,461177.7891,1354126.048,333620904.6,193915486.7,169321048.3,123172266.2,107781002.5,1204819.166,18950960.5,26164300.39,210106576.9,166877771.8,100295168.9,159485209.7,2487982.368,114003170.7,184484.771,5105649.824,35550414.61,4868057.621,41682372.82,137364919.6,28882071.4,200107507.9,117812059.2,1952840.149,74604203.76,3732596.899,68567383.01,47313820.21,155123460.6,517715587.5,2512126.998,1588728.27,26047207.15,2755156.468,5783862.878,137553789.1,4028977.482];
let HAIL_building = [3955358.582,10963215.2,23872666.05,467624.4762,265956483,47394.36349,187002.9733,603886.335,63409189.82,13351.85255,1125421.414,68502461.24,27679424.48,49035424.24,64057754.21,16151937.72,161029.7039,285517.5657,138876.4734,21227153.45,54528739.26,21059948.31,85925911.44,3564028.089,94859007.07,918556.9195,65936.18163,752644.3978,5987090.035,1344401.33,13488085.77,23506966.22,52672303.42,111279108.9,712631.561,3398149.342,21598.30797,5427550.364,32798914.74,8206846.768,561591615,57696.9468,75048.32667,4872286.982,66962.06095,3457289.414,59910572.49,6278286.072];
let ERQK_building = [51361491.6,86094927.5,116006021.8,9614543798,11918689.9,6323923.4,2096408.5,13047461.8,87225230.2,126956001.9,26897999.9,178825027.8,87361506.4,3314986.9,6528296.3,110538152.6,6851201.8,5579709.6,21642263.8,9112571.5,611861.2,69937011.2,169744220.6,32379082.4,1082387.6,276026211.3,6932149.6,24277052.1,41071469.7,45352980.1,36132595.3,132310.9,32917324,24532484.2,744979192.9,17360147.6,1671088.3,193975888.8,660540.8,284250208.4,35610435.1,366713791.7,2439515.8,12283300.8,1191742925,2855285.3,2929450.4,10956076.7];
let WFIR_building = [6612455.065,194583130.8,21866540.44,1418615377,112124412.7,214159.7999,1854741.233,268082129,21350463.12,34088451.98,116182803.7,1029977.244,1674712.844,2645943.58,19159087.07,17228379.18,534406.9225,5228016.776,1569031.975,4905992.252,34879984.28,16659884.14,14040482.99,53747966.49,4681130.455,108471559.7,965712.8223,24769294.84,92650024.92,2328717.385,19502628.52,12678575.17,3289353.086,73243641.76,66536577.49,2399262.589,77472.78014,13680861.64,37740569.82,3302311.847,228923161.5,190913636.5,312915.051,7633336.477,90331290.14,5665402.944,3443798.029,15660036.44];
let TRND_Ag = [394856.9398,17456.38027,265847.2843,92176.6134,543926.4933,12825.83352,10170.31049,147611.1038,340619.9401,418.112664,19861.38249,302514.2736,184505.868,956502.3991,728167.3219,280747.5372,1732.570233,30364.80162,7809.651349,154201.768,470229.4111,711534.7665,380888.294,31632.91499,1501878.533,1943.395923,1770.459153,6732.585911,48311.74805,39853.77966,333311.8326,274909.3357,93497.34664,319359.7589,8372.392724,84058.66398,705.9130089,108641.4289,341752.3797,246402.5221,709536.6958,5955.018199,3092.727897,61894.78287,13931.71551,13345.76617,313477.1578,47045.9525];
let HAIL_Ag = [173228.7448,15009.71278,2368898.304,2436903.866,5880048.341,93803.10503,294136.9598,370693.4911,2365527.319,1385.258382,130655.6116,2070419.287,1450389.427,21103182.46,32740350.86,637525.5868,37764.30138,1070761.577,31924.65348,1145184.125,10760958,933760.1682,1543671.335,411159.4747,81300626.57,3243.20302,1999.327943,717101.114,64192.06204,1754972.234,3239525.519,6314900.796,1034197.118,1627935.128,52199.45577,1467445.696,7020.812974,718502.4773,13711648.12,265678.7763,17644558.92,4928.279411,25823.19882,553294.5969,694752.8374,30873.71085,3723212.019,123796.2916];
let WFIR_Ag = [1029.047705,15728.52655,24282.44508,113531.9177,13664.01202,9.252300494,1658.285769,140419.3413,3841.919898,35300.25579,34817.26299,326.3002448,649.0974313,5785.37626,8611.141486,1138.910557,67.82362006,7932.680924,63.32103864,678.1045911,45862.8949,1827.043484,8599.880058,21521.97833,38865.10006,26593.82956,23.51443395,2940.444438,5795.813361,474.1114302,15770.35074,14964.80957,649.2151646,82073.38847,17004.81032,262.2402405,2.017607876,1414.718715,45907.90862,709.8867576,183123.5184,6943.41476,87.77331989,4184.769432,35710.96974,935.9935927,438.8289208,11295.99144];


// Define the initial dataset
let currentDataset = 'dataset1';

// Specify the title for the plot
let title = "Expected Loss in Each State";
let yaxis = "U.S. Dollar"


let trace1 = {
  x: state,
  y: TRND_building,
  type: 'bar',
  name: 'TRND Building'
};

let trace2 = {
  x: state,
  y: HAIL_building,
  type: 'bar',
  name: 'Hail building'
};


let trace3 = {
  x: state,
  y: ERQK_building,
  type: 'bar',
  name: 'ERQK building'
};

let trace4 = {
  x: state,
  y: WFIR_building,
  type: 'bar',
  name: 'WFIR building'
};

let trace5 = {
  x: state,
  y: TRND_Ag,
  type: 'bar',
  name: 'TRND_Ag'
};

let trace6 = {
  x: state,
  y: HAIL_Ag,
  type: 'bar',
  name: 'HAIL_Ag'
};

let trace7 = {
  x: state,
  y: WFIR_Ag,
  type: 'bar',
  name: 'WFIR_Ag'
};



let data = [trace1, trace2, trace3, trace4, trace5, trace6, trace7];

let layout = {
  title: title,
  yaxis: {
    title : yaxis
  }
  // Add other layout options if needed
};

Plotly.newPlot("plot", data, layout);

// Call updatePlotly() when a change takes place to the DOM
d3.selectAll("#selDataset").on("change", updatePlotly);

// This function is called when a dropdown menu item is selected
function updatePlotly() {
  // Use D3 to select the dropdown menu
  let dropdownMenu = d3.select("#selDataset");
  // Assign the value of the dropdown menu option to a variable
  let dataset = dropdownMenu.property("value");
  let z = document.getElementById("plot");
  z.innerHTML = "";


  // Set the current dataset
  //currentDataset = dataset;
  //initialize x and y arry
  let x = [];
  let y = [];
  // Update the data based on the selected dataset
  if (dataset === 'dataset1') {
    Plotly.newPlot("plot",[trace1], layout);
  } else if (dataset === 'dataset2') {
    Plotly.newPlot("plot",[trace2] , layout);
    
  } else if (dataset === 'dataset3') {
    Plotly.newPlot("plot",[trace3] ,layout);
  } else if (dataset === 'dataset4') {
    Plotly.newPlot("plot",[trace4] ,layout);
  } else if (dataset === 'dataset5') {
    Plotly.newPlot("plot",[trace5] ,layout);
  } else if (dataset === 'dataset6') {
    Plotly.newPlot("plot",[trace6] ,layout);
  } else if (dataset === 'dataset7') {
    Plotly.newPlot("plot",[trace7] ,layout);
  }
  
}
